{"remainingRequest":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\src\\components\\AuthWindow.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\src\\components\\AuthWindow.vue","mtime":1586345679092},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQogICAgZXhwb3J0IGRlZmF1bHQgew0KICAgICAgICBkYXRhOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHVzZXJuYW1lVGl0bGU6ICJuYW1lIiwNCiAgICAgICAgICAgICAgICB1c2VybmFtZTogIiIsDQogICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICIiLA0KICAgICAgICAgICAgICAgIHRva2VuOiAiIiwNCiAgICAgICAgICAgICAgICBob3N0OiAiaHR0cDovL2xvY2FsaG9zdDo1Mjg0MS9hcGkvYWNjb3VudCINCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbW91bnRlZDogZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIHRoaXMudXNlcm5hbWVUaXRsZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpOw0KICAgICAgICAgICAgdGhpcy50b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOw0KICAgICAgICB9LA0KICAgICAgICBtZXRob2RzOiB7DQogICAgICAgICAgICBzaG93V2luZG93KCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnNbJ2F1dGhNb2RhbCddLnNob3coKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBsb2dpbigpew0KICAgICAgICAgICAgICAgICBheGlvcyh7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLA0KICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaG9zdCwNCiAgICAgICAgICAgICAgICAgICAgZGF0YTp7DQogICAgICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB0aGlzLnVzZXJuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogdGhpcy5wYXNzd29yZH0NCiAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvb2tpZS5zZXQoInRva2VuIixyZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbix7ZXhwaXJlczogKHJlc3BvbnNlLmRhdGEudGltZS50b1N0cmluZygpKydtJyl9KTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29va2llLnNldCgidXNlcm5hbWUiLHJlc3BvbnNlLmRhdGEudXNlcm5hbWUse2V4cGlyZXM6IChyZXNwb25zZS5kYXRhLnRpbWUudG9TdHJpbmcoKSsnbScpfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcm5hbWVUaXRsZSA9IHJlc3BvbnNlLmRhdGEudXNlcm5hbWU7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW4gPSByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdteS1tb2RhbCcpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmllbGRzKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2xvZ2luLWNhbGxiYWNrJyk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kVG9hc3QoZXJyb3IucmVzcG9uc2UuZGF0YSwiRXJyb3IiLCJkYW5nZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHJlZ2lzdGVyKCl7DQogICAgICAgICAgICAgICAgYXhpb3Moew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwdXQnLA0KICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaG9zdCwNCiAgICAgICAgICAgICAgICAgICAgZGF0YTp7DQogICAgICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB0aGlzLnVzZXJuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogdGhpcy5wYXNzd29yZH0NCiAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmllbGRzKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJFRvYXN0KCJVc2VyIGNyZWF0ZWQhIiwiU3VjY2VzcyIsInN1Y2Nlc3MiKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRUb2FzdChlcnJvci5yZXNwb25zZS5kYXRhLCJFcnJvciIsImRhbmdlciIpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgc2lnbk9mZigpew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRoaXMudG9rZW4gPSBudWxsOw0KICAgICAgICAgICAgICAgIHRoaXMudXNlcm5hbWVUaXRsZSA9ICIiOw0KICAgICAgICAgICAgICAgIHRoaXMuJGNvb2tpZS5kZWxldGUoInVzZXJuYW1lIik7DQogICAgICAgICAgICAgICAgdGhpcy4kY29va2llLmRlbGV0ZSgidG9rZW4iKTsNCiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRmllbGRzKCk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnbG9naW4tY2FsbGJhY2snKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBjbGVhckZpZWxkcygpew0KICAgICAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSAiIjsNCiAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gIiI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQo="},{"version":3,"sources":["AuthWindow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AuthWindow.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <b-nav-item v-b-modal.my-modal v-if=\"token === null\">Sign in<b-icon icon=\"box-arrow-right\" ></b-icon>\r\n        </b-nav-item>\r\n        <b-nav-item v-else v-on:click=\"signOff()\">Hello, {{usernameTitle}} sign off <b-icon icon=\"box-arrow-left\" ></b-icon></b-nav-item>\r\n        <b-modal hide-footer id=\"my-modal\" title=\"Sign in\" ref=\"authModal\">\r\n            <b-tabs pills align=\"center\">\r\n                \r\n                <b-tab title=\"Log in\" active>\r\n                    <form class=\"login\" @submit.prevent=\"login\">\r\n                        <label>User name</label>\r\n                        <b-input required v-model=\"username\" type=\"text\" placeholder=\"Snoopy\" />\r\n                        <label>Password</label>\r\n                        <b-input required v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                        <hr />\r\n                        <b-button type=\"submit\" variant=\"success\">Login</b-button>\r\n                    </form>\r\n                </b-tab>\r\n                <b-tab title=\"Register\">\r\n                    <form class=\"register\" @submit.prevent=\"register\">\r\n                        <label>User name</label>\r\n                        <b-input required v-model=\"username\" type=\"text\" placeholder=\"Snoopy\" />\r\n                        <label>Password</label>\r\n                        <b-input required v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                        <hr />\r\n                        <b-button type=\"submit\" variant=\"success\">Register</b-button>\r\n                    </form>\r\n                </b-tab>\r\n            </b-tabs>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\n    export default {\r\n        data: function () {\r\n            return {\r\n                usernameTitle: \"name\",\r\n                username: \"\",\r\n                password: \"\",\r\n                token: \"\",\r\n                host: \"http://localhost:52841/api/account\"\r\n                \r\n                \r\n            }\r\n        },\r\n        mounted: function(){\r\n            this.usernameTitle = localStorage.getItem(\"username\");\r\n            this.token = localStorage.getItem(\"token\");\r\n        },\r\n        methods: {\r\n            showWindow() {\r\n                this.$refs['authModal'].show();\r\n            },\r\n            login(){\r\n                 axios({\r\n                    method: 'post',\r\n                    url: this.host,\r\n                    data:{\r\n                        'username': this.username,\r\n                        'password': this.password}\r\n                }).then(response => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(response.data);\r\n                    this.$cookie.set(\"token\",response.data.access_token,{expires: (response.data.time.toString()+'m')});\r\n                    this.$cookie.set(\"username\",response.data.username,{expires: (response.data.time.toString()+'m')});\r\n                    this.usernameTitle = response.data.username;\r\n                    this.token = response.data.access_token;\r\n                    this.$bvModal.hide('my-modal');\r\n                    this.clearFields();\r\n                    this.$emit('login-callback');\r\n                    \r\n                }).catch(error => {\r\n                    this.$Toast(error.response.data,\"Error\",\"danger\");\r\n                    \r\n                    \r\n                });\r\n            },\r\n            register(){\r\n                axios({\r\n                    method: 'put',\r\n                    url: this.host,\r\n                    data:{\r\n                        'username': this.username,\r\n                        'password': this.password}\r\n                }).then(response => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(response.data);\r\n                   \r\n                    \r\n                    this.clearFields();\r\n                    this.$Toast(\"User created!\",\"Success\",\"success\");\r\n                    \r\n                }).catch(error => {\r\n                    this.$Toast(error.response.data,\"Error\",\"danger\");\r\n                    \r\n                    \r\n                });\r\n            },\r\n            signOff(){\r\n                \r\n                this.token = null;\r\n                this.usernameTitle = \"\";\r\n                this.$cookie.delete(\"username\");\r\n                this.$cookie.delete(\"token\");\r\n                this.clearFields();\r\n                this.$emit('login-callback');\r\n            },\r\n            clearFields(){\r\n                this.username = \"\";\r\n                this.password = \"\";\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    a {\r\n        color: rgba(255, 255, 255, 1) !important;\r\n    }\r\n</style>"]}]}