{"remainingRequest":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\src\\components\\AuthWindow.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\src\\components\\AuthWindow.vue","mtime":1585583493865},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQogICAgZXhwb3J0IGRlZmF1bHQgew0KICAgICAgICBkYXRhOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHVzZXJuYW1lVGl0bGU6ICJuYW1lIiwNCiAgICAgICAgICAgICAgICB1c2VybmFtZTogIiIsDQogICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICIiLA0KICAgICAgICAgICAgICAgIHRva2VuOiAiIiwNCiAgICAgICAgICAgICAgICBob3N0OiAiaHR0cDovL2xvY2FsaG9zdDo1Mjg0MS9hcGkvYWNjb3VudCINCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbW91bnRlZDogZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIHRoaXMudXNlcm5hbWVUaXRsZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpOw0KICAgICAgICAgICAgdGhpcy50b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOw0KICAgICAgICB9LA0KICAgICAgICBtZXRob2RzOiB7DQogICAgICAgICAgICBzaG93V2luZG93KCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnNbJ2F1dGhNb2RhbCddLnNob3coKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBsb2dpbigpew0KICAgICAgICAgICAgICAgICBheGlvcyh7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLA0KICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaG9zdCwNCiAgICAgICAgICAgICAgICAgICAgZGF0YTp7DQogICAgICAgICAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB0aGlzLnVzZXJuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogdGhpcy5wYXNzd29yZH0NCiAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VybmFtZSIscmVzcG9uc2UuZGF0YS51c2VybmFtZSk7DQogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIscmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lVGl0bGUgPSByZXNwb25zZS5kYXRhLnVzZXJuYW1lOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW47DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnbXktbW9kYWwnKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpZWxkcygpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2dpbi1jYWxsYmFjaycpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJFRvYXN0KGVycm9yLnJlc3BvbnNlLmRhdGEsIkVycm9yIiwiZGFuZ2VyIik7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICByZWdpc3Rlcigpew0KICAgICAgICAgICAgICAgIGF4aW9zKHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncHV0JywNCiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmhvc3QsDQogICAgICAgICAgICAgICAgICAgIGRhdGE6ew0KICAgICAgICAgICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdGhpcy51c2VybmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHRoaXMucGFzc3dvcmR9DQogICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpZWxkcygpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRUb2FzdCgiVXNlciBjcmVhdGVkISIsIlN1Y2Nlc3MiLCJzdWNjZXNzIik7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kVG9hc3QoZXJyb3IucmVzcG9uc2UuZGF0YSwiRXJyb3IiLCJkYW5nZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHNpZ25PZmYoKXsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB0aGlzLnRva2VuID0gbnVsbDsNCiAgICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lVGl0bGUgPSAiIjsNCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoInVzZXJuYW1lIik7DQogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCJ0b2tlbiIpOw0KICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJGaWVsZHMoKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2dpbi1jYWxsYmFjaycpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGNsZWFyRmllbGRzKCl7DQogICAgICAgICAgICAgICAgdGhpcy51c2VybmFtZSA9ICIiOw0KICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSAiIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg=="},{"version":3,"sources":["AuthWindow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AuthWindow.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <b-nav-item v-b-modal.my-modal v-if=\"token === null\">Sign in<b-icon icon=\"box-arrow-right\" ></b-icon>\r\n        </b-nav-item>\r\n        <b-nav-item v-else v-on:click=\"signOff()\">Hello, {{usernameTitle}} sign off <b-icon icon=\"box-arrow-left\" ></b-icon></b-nav-item>\r\n        <b-modal hide-footer id=\"my-modal\" title=\"Sign in\" ref=\"authModal\">\r\n            <b-tabs pills align=\"center\">\r\n                \r\n                <b-tab title=\"Log in\" active>\r\n                    <form class=\"login\" @submit.prevent=\"login\">\r\n                        <label>User name</label>\r\n                        <b-input required v-model=\"username\" type=\"text\" placeholder=\"Snoopy\" />\r\n                        <label>Password</label>\r\n                        <b-input required v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                        <hr />\r\n                        <b-button type=\"submit\" variant=\"success\">Login</b-button>\r\n                    </form>\r\n                </b-tab>\r\n                <b-tab title=\"Register\">\r\n                    <form class=\"register\" @submit.prevent=\"register\">\r\n                        <label>User name</label>\r\n                        <b-input required v-model=\"username\" type=\"text\" placeholder=\"Snoopy\" />\r\n                        <label>Password</label>\r\n                        <b-input required v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                        <hr />\r\n                        <b-button type=\"submit\" variant=\"success\">Register</b-button>\r\n                    </form>\r\n                </b-tab>\r\n            </b-tabs>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\n    export default {\r\n        data: function () {\r\n            return {\r\n                usernameTitle: \"name\",\r\n                username: \"\",\r\n                password: \"\",\r\n                token: \"\",\r\n                host: \"http://localhost:52841/api/account\"\r\n                \r\n                \r\n            }\r\n        },\r\n        mounted: function(){\r\n            this.usernameTitle = localStorage.getItem(\"username\");\r\n            this.token = localStorage.getItem(\"token\");\r\n        },\r\n        methods: {\r\n            showWindow() {\r\n                this.$refs['authModal'].show();\r\n            },\r\n            login(){\r\n                 axios({\r\n                    method: 'post',\r\n                    url: this.host,\r\n                    data:{\r\n                        'username': this.username,\r\n                        'password': this.password}\r\n                }).then(response => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(response.data);\r\n                   \r\n                    localStorage.setItem(\"username\",response.data.username);\r\n                    localStorage.setItem(\"token\",response.data.access_token);\r\n                    this.usernameTitle = response.data.username;\r\n                    this.token = response.data.access_token;\r\n                    this.$bvModal.hide('my-modal');\r\n                    this.clearFields();\r\n                    this.$emit('login-callback');\r\n                    \r\n                }).catch(error => {\r\n                    this.$Toast(error.response.data,\"Error\",\"danger\");\r\n                    \r\n                    \r\n                });\r\n            },\r\n            register(){\r\n                axios({\r\n                    method: 'put',\r\n                    url: this.host,\r\n                    data:{\r\n                        'username': this.username,\r\n                        'password': this.password}\r\n                }).then(response => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(response.data);\r\n                   \r\n                    \r\n                    this.clearFields();\r\n                    this.$Toast(\"User created!\",\"Success\",\"success\");\r\n                    \r\n                }).catch(error => {\r\n                    this.$Toast(error.response.data,\"Error\",\"danger\");\r\n                    \r\n                    \r\n                });\r\n            },\r\n            signOff(){\r\n                \r\n                this.token = null;\r\n                this.usernameTitle = \"\";\r\n                localStorage.clear(\"username\");\r\n                localStorage.clear(\"token\");\r\n                this.clearFields();\r\n                this.$emit('login-callback');\r\n            },\r\n            clearFields(){\r\n                this.username = \"\";\r\n                this.password = \"\";\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    a {\r\n        color: rgba(255, 255, 255, 1) !important;\r\n    }\r\n</style>"]}]}