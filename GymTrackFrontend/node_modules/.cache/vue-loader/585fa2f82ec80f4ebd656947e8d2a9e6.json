{"remainingRequest":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\GymTrackFrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Arkadii\\source\\vue\\Proj1\\GymTrackFrontend\\src\\components\\AuthWindow.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\GymTrackFrontend\\src\\components\\AuthWindow.vue","mtime":1588256256510},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\GymTrackFrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\GymTrackFrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\GymTrackFrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\GymTrackFrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQogICAgZXhwb3J0IGRlZmF1bHQgew0KICAgICAgICBkYXRhOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHVzZXJuYW1lVGl0bGU6ICJuYW1lIiwNCiAgICAgICAgICAgICAgICB1c2VybmFtZTogIiIsDQogICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICIiLA0KICAgICAgICAgICAgICAgIHRva2VuOiAiIiwNCiAgICAgICAgICAgICAgICBob3N0OiAiaHR0cDovL2xvY2FsaG9zdDo1Mjg0MS9hcGkvYWNjb3VudCINCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbW91bnRlZDogZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIHRoaXMudXNlcm5hbWVUaXRsZSA9IHRoaXMuJGNvb2tpZS5nZXQoInVzZXJuYW1lIik7DQogICAgICAgICAgICB0aGlzLnRva2VuID0gdGhpcy4kY29va2llLmdldCgidG9rZW4iKTsNCiAgICAgICAgfSwNCiAgICAgICAgbWV0aG9kczogew0KICAgICAgICAgICAgc2hvd1dpbmRvdygpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWydhdXRoTW9kYWwnXS5zaG93KCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgbG9naW4oKXsNCiAgICAgICAgICAgICAgICAgYXhpb3Moew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywNCiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmhvc3QsDQogICAgICAgICAgICAgICAgICAgIGRhdGE6ew0KICAgICAgICAgICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdGhpcy51c2VybmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHRoaXMucGFzc3dvcmR9DQogICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb29raWUuc2V0KCJ0b2tlbiIscmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4se2V4cGlyZXM6IChyZXNwb25zZS5kYXRhLnRpbWUudG9TdHJpbmcoKSsnbScpfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvb2tpZS5zZXQoInVzZXJuYW1lIixyZXNwb25zZS5kYXRhLnVzZXJuYW1lLHtleHBpcmVzOiAocmVzcG9uc2UuZGF0YS50aW1lLnRvU3RyaW5nKCkrJ20nKX0pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lVGl0bGUgPSByZXNwb25zZS5kYXRhLnVzZXJuYW1lOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW47DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnbXktbW9kYWwnKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpZWxkcygpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2dpbi1jYWxsYmFjaycpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJFRvYXN0KGVycm9yLnJlc3BvbnNlLmRhdGEsIkVycm9yIiwiZGFuZ2VyIik7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICByZWdpc3Rlcigpew0KICAgICAgICAgICAgICAgIGF4aW9zKHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncHV0JywNCiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmhvc3QsDQogICAgICAgICAgICAgICAgICAgIGRhdGE6ew0KICAgICAgICAgICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdGhpcy51c2VybmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHRoaXMucGFzc3dvcmR9DQogICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpZWxkcygpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRUb2FzdCgiVXNlciBjcmVhdGVkISIsIlN1Y2Nlc3MiLCJzdWNjZXNzIik7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kVG9hc3QoZXJyb3IucmVzcG9uc2UuZGF0YSwiRXJyb3IiLCJkYW5nZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHNpZ25PZmYoKXsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB0aGlzLnRva2VuID0gbnVsbDsNCiAgICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lVGl0bGUgPSAiIjsNCiAgICAgICAgICAgICAgICB0aGlzLiRjb29raWUuZGVsZXRlKCJ1c2VybmFtZSIpOw0KICAgICAgICAgICAgICAgIHRoaXMuJGNvb2tpZS5kZWxldGUoInRva2VuIik7DQogICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpZWxkcygpOw0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2xvZ2luLWNhbGxiYWNrJyk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgY2xlYXJGaWVsZHMoKXsNCiAgICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gIiI7DQogICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9ICIiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0K"},{"version":3,"sources":["AuthWindow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AuthWindow.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <b-nav-item v-b-modal.my-modal v-if=\"token === null\">Sign in<b-icon icon=\"box-arrow-right\" ></b-icon>\r\n        </b-nav-item>\r\n        <b-nav-item v-else v-on:click=\"signOff()\">Hello, {{usernameTitle}} sign off <b-icon icon=\"box-arrow-left\" ></b-icon></b-nav-item>\r\n        <b-modal hide-footer id=\"my-modal\" title=\"Sign in\" ref=\"authModal\">\r\n            <b-tabs pills align=\"center\">\r\n                \r\n                <b-tab title=\"Log in\" active>\r\n                    <form class=\"login\" @submit.prevent=\"login\">\r\n                        <label>User name</label>\r\n                        <b-input required v-model=\"username\" type=\"text\" placeholder=\"Snoopy\" />\r\n                        <label>Password</label>\r\n                        <b-input required v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                        <hr />\r\n                        <b-button type=\"submit\" variant=\"success\">Login</b-button>\r\n                    </form>\r\n                </b-tab>\r\n                <b-tab title=\"Register\">\r\n                    <form class=\"register\" @submit.prevent=\"register\">\r\n                        <label>User name</label>\r\n                        <b-input required v-model=\"username\" type=\"text\" placeholder=\"Snoopy\" />\r\n                        <label>Password</label>\r\n                        <b-input required v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                        <hr />\r\n                        <b-button type=\"submit\" variant=\"success\">Register</b-button>\r\n                    </form>\r\n                </b-tab>\r\n            </b-tabs>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\n    export default {\r\n        data: function () {\r\n            return {\r\n                usernameTitle: \"name\",\r\n                username: \"\",\r\n                password: \"\",\r\n                token: \"\",\r\n                host: \"http://localhost:52841/api/account\"\r\n                \r\n                \r\n            }\r\n        },\r\n        mounted: function(){\r\n            this.usernameTitle = this.$cookie.get(\"username\");\r\n            this.token = this.$cookie.get(\"token\");\r\n        },\r\n        methods: {\r\n            showWindow() {\r\n                this.$refs['authModal'].show();\r\n            },\r\n            login(){\r\n                 axios({\r\n                    method: 'post',\r\n                    url: this.host,\r\n                    data:{\r\n                        'username': this.username,\r\n                        'password': this.password}\r\n                }).then(response => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(response.data);\r\n                    this.$cookie.set(\"token\",response.data.access_token,{expires: (response.data.time.toString()+'m')});\r\n                    this.$cookie.set(\"username\",response.data.username,{expires: (response.data.time.toString()+'m')});\r\n                    this.usernameTitle = response.data.username;\r\n                    this.token = response.data.access_token;\r\n                    this.$bvModal.hide('my-modal');\r\n                    this.clearFields();\r\n                    this.$emit('login-callback');\r\n                    \r\n                }).catch(error => {\r\n                    this.$Toast(error.response.data,\"Error\",\"danger\");\r\n                    \r\n                    \r\n                });\r\n            },\r\n            register(){\r\n                axios({\r\n                    method: 'put',\r\n                    url: this.host,\r\n                    data:{\r\n                        'username': this.username,\r\n                        'password': this.password}\r\n                }).then(response => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(response.data);\r\n                   \r\n                    \r\n                    this.clearFields();\r\n                    this.$Toast(\"User created!\",\"Success\",\"success\");\r\n                    \r\n                }).catch(error => {\r\n                    this.$Toast(error.response.data,\"Error\",\"danger\");\r\n                    \r\n                    \r\n                });\r\n            },\r\n            signOff(){\r\n                \r\n                this.token = null;\r\n                this.usernameTitle = \"\";\r\n                this.$cookie.delete(\"username\");\r\n                this.$cookie.delete(\"token\");\r\n                this.clearFields();\r\n                this.$emit('login-callback');\r\n            },\r\n            clearFields(){\r\n                this.username = \"\";\r\n                this.password = \"\";\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    a {\r\n        color: rgba(255, 255, 255, 1) !important;\r\n    }\r\n</style>"]}]}