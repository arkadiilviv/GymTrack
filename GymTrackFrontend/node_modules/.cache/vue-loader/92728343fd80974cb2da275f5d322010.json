{"remainingRequest":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\src\\components\\AuthWindow.vue?vue&type=style&index=0&id=2b5445e8&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\src\\components\\AuthWindow.vue","mtime":1585583493865},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Arkadii\\source\\vue\\Proj1\\test1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKYSB7CiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKSAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["AuthWindow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA","file":"AuthWindow.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <b-nav-item v-b-modal.my-modal v-if=\"token === null\">Sign in<b-icon icon=\"box-arrow-right\" ></b-icon>\r\n        </b-nav-item>\r\n        <b-nav-item v-else v-on:click=\"signOff()\">Hello, {{usernameTitle}} sign off <b-icon icon=\"box-arrow-left\" ></b-icon></b-nav-item>\r\n        <b-modal hide-footer id=\"my-modal\" title=\"Sign in\" ref=\"authModal\">\r\n            <b-tabs pills align=\"center\">\r\n                \r\n                <b-tab title=\"Log in\" active>\r\n                    <form class=\"login\" @submit.prevent=\"login\">\r\n                        <label>User name</label>\r\n                        <b-input required v-model=\"username\" type=\"text\" placeholder=\"Snoopy\" />\r\n                        <label>Password</label>\r\n                        <b-input required v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                        <hr />\r\n                        <b-button type=\"submit\" variant=\"success\">Login</b-button>\r\n                    </form>\r\n                </b-tab>\r\n                <b-tab title=\"Register\">\r\n                    <form class=\"register\" @submit.prevent=\"register\">\r\n                        <label>User name</label>\r\n                        <b-input required v-model=\"username\" type=\"text\" placeholder=\"Snoopy\" />\r\n                        <label>Password</label>\r\n                        <b-input required v-model=\"password\" type=\"password\" placeholder=\"Password\" />\r\n                        <hr />\r\n                        <b-button type=\"submit\" variant=\"success\">Register</b-button>\r\n                    </form>\r\n                </b-tab>\r\n            </b-tabs>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\n    export default {\r\n        data: function () {\r\n            return {\r\n                usernameTitle: \"name\",\r\n                username: \"\",\r\n                password: \"\",\r\n                token: \"\",\r\n                host: \"http://localhost:52841/api/account\"\r\n                \r\n                \r\n            }\r\n        },\r\n        mounted: function(){\r\n            this.usernameTitle = localStorage.getItem(\"username\");\r\n            this.token = localStorage.getItem(\"token\");\r\n        },\r\n        methods: {\r\n            showWindow() {\r\n                this.$refs['authModal'].show();\r\n            },\r\n            login(){\r\n                 axios({\r\n                    method: 'post',\r\n                    url: this.host,\r\n                    data:{\r\n                        'username': this.username,\r\n                        'password': this.password}\r\n                }).then(response => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(response.data);\r\n                   \r\n                    localStorage.setItem(\"username\",response.data.username);\r\n                    localStorage.setItem(\"token\",response.data.access_token);\r\n                    this.usernameTitle = response.data.username;\r\n                    this.token = response.data.access_token;\r\n                    this.$bvModal.hide('my-modal');\r\n                    this.clearFields();\r\n                    this.$emit('login-callback');\r\n                    \r\n                }).catch(error => {\r\n                    this.$Toast(error.response.data,\"Error\",\"danger\");\r\n                    \r\n                    \r\n                });\r\n            },\r\n            register(){\r\n                axios({\r\n                    method: 'put',\r\n                    url: this.host,\r\n                    data:{\r\n                        'username': this.username,\r\n                        'password': this.password}\r\n                }).then(response => {\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(response.data);\r\n                   \r\n                    \r\n                    this.clearFields();\r\n                    this.$Toast(\"User created!\",\"Success\",\"success\");\r\n                    \r\n                }).catch(error => {\r\n                    this.$Toast(error.response.data,\"Error\",\"danger\");\r\n                    \r\n                    \r\n                });\r\n            },\r\n            signOff(){\r\n                \r\n                this.token = null;\r\n                this.usernameTitle = \"\";\r\n                localStorage.clear(\"username\");\r\n                localStorage.clear(\"token\");\r\n                this.clearFields();\r\n                this.$emit('login-callback');\r\n            },\r\n            clearFields(){\r\n                this.username = \"\";\r\n                this.password = \"\";\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    a {\r\n        color: rgba(255, 255, 255, 1) !important;\r\n    }\r\n</style>"]}]}